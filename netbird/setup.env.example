## Example file. You can copy this file to setup.env and update its values.

# Deployment mode:
# - standalone           → NetBird terminates TLS itself (LetsEncrypt / certs)
# - proxy_docker         → reverse proxy in Docker (managed outside this compose)
# - proxy_external       → reverse proxy on another host/VM, NetBird exposes HTTP ports
# - proxy_docker_caddy   → reverse proxy (Caddy) included in this compose, Caddyfile is generated
NETBIRD_DEPLOYMENT_MODE="standalone"

# Generic Docker network name used by your reverse proxy in Docker (proxy_docker / proxy_docker_caddy)
NETBIRD_REVERSE_PROXY_NETWORK="reverse_proxy_net"

# Image tags
NETBIRD_DASHBOARD_TAG=""
NETBIRD_SIGNAL_TAG=""
NETBIRD_MANAGEMENT_TAG=""
COTURN_TAG=""
NETBIRD_RELAY_TAG=""

# Dashboard domain. e.g. app.mydomain.com
NETBIRD_DOMAIN=""

# TURN server domain. e.g. turn.mydomain.com
NETBIRD_TURN_DOMAIN=""

# TURN server public IP address
NETBIRD_TURN_EXTERNAL_IP=""

# OIDC
NETBIRD_AUTH_OIDC_CONFIGURATION_ENDPOINT=""
NETBIRD_AUTH_AUDIENCE=""
NETBIRD_AUTH_CLIENT_ID=""
NETBIRD_AUTH_SUPPORTED_SCOPES=""
NETBIRD_USE_AUTH0="false"
# NETBIRD_AUTH_CLIENT_SECRET=""
# NETBIRD_AUTH_USER_ID_CLAIM=""
# NETBIRD_AUTH_REDIRECT_URI="/peers"
# NETBIRD_AUTH_SILENT_REDIRECT_URI="/add-peers"
# NETBIRD_TOKEN_SOURCE="idToken"

# OIDC Device Authorization Flow
NETBIRD_AUTH_DEVICE_AUTH_PROVIDER="none"
NETBIRD_AUTH_DEVICE_AUTH_CLIENT_ID=""
NETBIRD_AUTH_DEVICE_AUTH_AUDIENCE=$NETBIRD_AUTH_AUDIENCE
NETBIRD_AUTH_DEVICE_AUTH_SCOPE="openid"
NETBIRD_AUTH_DEVICE_AUTH_USE_ID_TOKEN=false

# OIDC PKCE Authorization Flow
NETBIRD_AUTH_PKCE_REDIRECT_URL_PORTS="53000"

# IDP Management
NETBIRD_MGMT_IDP="none"
NETBIRD_IDP_MGMT_CLIENT_ID=$NETBIRD_AUTH_CLIENT_ID
NETBIRD_IDP_MGMT_CLIENT_SECRET=""
# NETBIRD_MGMT_IDP_SIGNKEY_REFRESH=false

# LetsEncrypt / Reverse Proxy
NETBIRD_DISABLE_LETSENCRYPT=false
NETBIRD_EXTERNAL_TLS_PORT=443
NETBIRD_LETSENCRYPT_EMAIL=""

# Base path for bind mounted data (management, signal, letsencrypt, postgres)
# Default is ./artifacts/data
# DATA_PATH="./artifacts/data"

# Extra settings
NETBIRD_DISABLE_ANONYMOUS_METRICS=false
NETBIRD_MGMT_DNS_DOMAIN=netbird.selfhosted
NETBIRD_MGMT_DISABLE_DEFAULT_POLICY=false

# Relay settings
NETBIRD_RELAY_DOMAIN=""
NETBIRD_RELAY_PORT=""
NETBIRD_MGMT_API_PORT=""
NETBIRD_SIGNAL_PORT=""

# Store config (database)
NETBIRD_STORE_CONFIG_ENGINE="sqlite"

# If NETBIRD_STORE_CONFIG_ENGINE=postgres and NETBIRD_STORE_ENGINE_POSTGRES_DSN is empty,
# configure.sh will start an internal Postgres and generate a DSN automatically.
NETBIRD_STORE_ENGINE_POSTGRES_DSN=""

# Internal Postgres settings (used only if no DSN is provided)
NETBIRD_POSTGRES_DB="netbird"
NETBIRD_POSTGRES_USER="netbird"
NETBIRD_POSTGRES_PASSWORD=""
NETBIRD_STORE_ENGINE_MYSQL_DSN=""